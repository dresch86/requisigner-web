(()=>{var e={1838:e=>{function AlertMessageHandler(){this.elTimeoutInProgress=!1}AlertMessageHandler.prototype.showAlert=function(e,t,s,i){var n=this,r=null==t?"":t.trim(),o=void 0===t||null===e?"danger":e;0==r.length&&(r="A critical system error occurred! Please try again later!"),this.elResponseTxt.html(r),this.elResponseBox.addClass("d-flex"),this.elResponseBox.removeClass("d-none"),"danger"==o?this.elResponseBox.addClass("alert-danger"):"success"==o?this.elResponseBox.addClass("alert-success"):"warning"==o?this.elResponseBox.addClass("alert-warning"):this.elResponseBox.addClass("alert-info"),jQuery("html, body").animate({scrollTop:this.elResponseBox.offset().top-this.elResponseBox.outerHeight(!0)/2},500),!0!==i&&(this.elTimeoutInProgress=!0,setTimeout((function(){n.elTimeoutInProgress&&n.hideAlert(),!0===s&&window.location.reload()}),5e3))},AlertMessageHandler.prototype.hideAlert=function(){this.elResponseBox.addClass("d-none"),this.elResponseBox.removeClass("d-flex"),this.elResponseBox.removeClass("alert-info"),this.elResponseBox.removeClass("alert-danger"),this.elResponseBox.removeClass("alert-success"),this.elResponseBox.removeClass("alert-warning"),this.elResponseTxt.empty(),this.elTimeoutInProgress=!1},AlertMessageHandler.prototype.init=function(e){if(this.elResponseBox=jQuery(e),1!=this.elResponseBox.length)throw new Error("[AlertMessageHandler] - Alert box id invalid");if(this.elResponseTxt=this.elResponseBox.find("> .alert-text"),1!=this.elResponseTxt.length)throw new Error("[AlertMessageHandler] - Alert text box invalid");if(this.elDismissBtn=this.elResponseBox.find("> button.alert-dismiss-btn"),1!=this.elDismissBtn.length)throw new Error("[AlertMessageHandler] - Alert dismiss button not found");this.elDismissBtn.click(this.hideAlert.bind(this))},e.exports=AlertMessageHandler}},t={};function __webpack_require__(s){var i=t[s];if(void 0!==i)return i.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,__webpack_require__),n.exports}(()=>{var e=__webpack_require__(1838);function TemplateFormClient(){var t=this;this.amhAlertHandler=new e,this.amhAlertHandler.init("#requisigner-main-alert-box"),this.amhDialogAlertHandler=new e,this.amhDialogAlertHandler.init("#requisigner-dialog-alert-box"),this.oHoldonOpts={theme:"sk-circle"},this.elBSModal=jQuery("#requisigner-modal"),this.elModalBody=this.elBSModal.find(".modal-body"),this.bsModalWindow=new bootstrap.Modal(this.elBSModal.get(0)),this.elDocumentAssignForm=jQuery("#requisigner-document-assign-form"),this.elDocumentAssignForm.submit(this.postDocument.bind(this)),this.sCSRFToken=this.elDocumentAssignForm.find('> input[name="_token"]').val(),this.elPlaceholderList=jQuery("#requisigner-placeholder-list"),this.elPlaceholderInputs=this.elPlaceholderList.find("> tbody > tr > td:last-child > input"),this.elPlaceholderInputs.keyup(this.querySignees.bind(this)),jQuery("button.requisigner-btn-done").click(this.collectUsers.bind(this)),jQuery("button.requisigner-btn-sigs").click((function(){t.bsModalWindow.show()})),this.aSignees=[],this.elPDFViewer=jQuery("#requisigner-pdf-viewer"),this.elDocTitle=this.elDocumentAssignForm.find('input[id="requisigner-document-title"]'),this.elDocDueDate=this.elDocumentAssignForm.find('input[id="requisigner-document-due-date"]'),this.elDocMetatags=this.elDocumentAssignForm.find('input[id="requisigner-document-metatags"]'),flatpickr(this.elDocDueDate,{enableTime:!0,noCalendar:!1,dateFormat:"m-d-Y h:i K"}),jQuery(".requisigner-btn-save").click((function(){t.elDocumentAssignForm.submit()}))}TemplateFormClient.prototype.querySignees=function(e){var t=null,s=null,i=jQuery(e.target),n=i.val().trim();if(n.length>3){var r=new FormData;r.append("query_name",n),jQuery.ajax({type:"POST",url:REQUISIGNER_USER_SEARCH_URL,data:r,processData:!1,contentType:!1,headers:{"X-CSRF-TOKEN":this.sCSRFToken}}).done((function(e){if((s=i.find("+ datalist.requisigner-signees-list")).empty(),200==e.code)for(var n=0;n<e.result.length;n++)(t=jQuery(document.createElement("option"))).data("uid",e.result[n][0]),t.attr("value",e.result[n][1]),s.append(t);else(t=jQuery(document.createElement("option"))).data("uid",-1),t.attr("value","Search error..."),s.append(t)}))}else(t=jQuery(document.createElement("option"))).data("uid",-1),t.attr("value","Enter name above..."),(s=i.find("+ datalist.requisigner-signees-list")).empty(),s.append(t)},TemplateFormClient.prototype.collectUsers=function(e){var t=null,s=null,i=0,n=[];this.elPlaceholderInputs.each((function(e,r){t=jQuery(r),(s=t.find('+ datalist.requisigner-signees-list > option[value="'+t.val().trim()+'"]')).length>0?n.push({user_id:s.data("uid"),placeholder:t.data("placeholderId")}):++i})),0==i?(this.aSignees=n,this.bsModalWindow.hide()):this.amhDialogAlertHandler.showAlert("danger","One or more of the signees you entered was not found in our system!")},TemplateFormClient.prototype.postDocument=function(e){var t=this;e.preventDefault(),this.aSignees.length>0?this.elPDFViewer[0].contentWindow.PDFViewerApplication.getPDFBytes().then((function(e){var s=new FileReader;s.readAsDataURL(e),s.onload=function(){var e={version_id:t.elPDFViewer.data("versionId"),title:t.elDocTitle.val(),due_date:t.elDocDueDate.val(),metatags:t.elDocMetatags.val().trim().split(/,\s*/),signees:t.aSignees,pdf_document:s.result.replace(/^data:.+;base64,/,"")};t.oHoldonOpts.message="Submitting document...",HoldOn.open(t.oHoldonOpts),jQuery.ajax({type:"POST",url:t.elDocumentAssignForm.attr("action"),data:JSON.stringify(e),contentType:"application/json",processData:!1,headers:{"X-CSRF-TOKEN":t.sCSRFToken}}).done((function(e){200==e.code?t.amhAlertHandler.showAlert("success",e.result):Array.isArray(e.result)?t.amhAlertHandler.showAlert("danger",e.result.join("<br>")):t.amhAlertHandler.showAlert("danger",e.result)})).always((function(){HoldOn.close()}))}})):this.amhAlertHandler.showAlert("danger","No signees were added! Please check and correct.")},jQuery(document).ready((function(){new TemplateFormClient}))})()})();