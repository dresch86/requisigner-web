(()=>{var e={1838:e=>{function AlertMessageHandler(){this.elTimeoutInProgress=!1}AlertMessageHandler.prototype.showAlert=function(e,t,s,r){var n=this,o=null==t?"":t.trim(),i=void 0===t||null===e?"danger":e;0==o.length&&(o="A critical system error occurred! Please try again later!"),this.elResponseTxt.html(o),this.elResponseBox.addClass("d-flex"),this.elResponseBox.removeClass("d-none"),"danger"==i?this.elResponseBox.addClass("alert-danger"):"success"==i?this.elResponseBox.addClass("alert-success"):"warning"==i?this.elResponseBox.addClass("alert-warning"):this.elResponseBox.addClass("alert-info"),jQuery("html, body").animate({scrollTop:this.elResponseBox.offset().top-this.elResponseBox.outerHeight(!0)/2},500),!0!==r&&(this.elTimeoutInProgress=!0,setTimeout((function(){n.elTimeoutInProgress&&n.hideAlert(),!0===s&&window.location.reload()}),5e3))},AlertMessageHandler.prototype.hideAlert=function(){this.elResponseBox.addClass("d-none"),this.elResponseBox.removeClass("d-flex"),this.elResponseBox.removeClass("alert-info"),this.elResponseBox.removeClass("alert-danger"),this.elResponseBox.removeClass("alert-success"),this.elResponseBox.removeClass("alert-warning"),this.elResponseTxt.empty(),this.elTimeoutInProgress=!1},AlertMessageHandler.prototype.init=function(e){if(this.elResponseBox=jQuery(e),1!=this.elResponseBox.length)throw new Error("[AlertMessageHandler] - Alert box id invalid");if(this.elResponseTxt=this.elResponseBox.find("> .alert-text"),1!=this.elResponseTxt.length)throw new Error("[AlertMessageHandler] - Alert text box invalid");if(this.elDismissBtn=this.elResponseBox.find("> button.alert-dismiss-btn"),1!=this.elDismissBtn.length)throw new Error("[AlertMessageHandler] - Alert dismiss button not found");this.elDismissBtn.click(this.hideAlert.bind(this))},e.exports=AlertMessageHandler}},t={};function __webpack_require__(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,__webpack_require__),n.exports}(()=>{var e=__webpack_require__(1838);function TemplateFormClient(){var t=this;this.amhAlertHandler=new e,this.amhAlertHandler.init("#requisigner-main-alert-box"),this.oHoldonOpts={theme:"sk-circle"},this.elBSModal=jQuery("#requisigner-modal"),this.bsModalWindow=new bootstrap.Modal(this.elBSModal.get(0)),this.elModalBody=this.elBSModal.find(".modal-body"),this.sCSRFToken=jQuery('meta[name="csrf_token"]').attr("content"),this.elSigneeList=jQuery("#requisigner_signees_list"),this.elPlaceholderList=jQuery("#requisigner-placeholder-list"),this.elPlaceholderList.find("> tbody > tr > td:last-child > input").keyup(this.querySignees.bind(this)),jQuery("button.requisigner-btn-save").click(this.postDocument.bind(this)),jQuery("button.requisigner-btn-done").click(this.collectUsers.bind(this)),jQuery("button.requisigner-btn-sigs").click((function(){t.bsModalWindow.show()}))}TemplateFormClient.prototype.querySignees=function(e){var t=this,s=jQuery(e.target).val().trim();if(s.length>3){var r=new FormData;r.append("query",s),jQuery.ajax({type:"POST",url:REQUISIGNER_USER_SEARCH_URL,data:r,processData:!1,contentType:!1,headers:{"X-CSRF-TOKEN":this.sCSRFToken}}).done((function(e){if(200==e.code){var s=null;t.elSigneeList.empty();for(var r=0;r<e.result.length;r++)(s=jQuery(document.createElement("option"))).data("uid",e.result[r][0]),s.attr("value",e.result[r][1]),t.elSigneeList.append(s)}}))}},TemplateFormClient.prototype.collectUsers=function(e){this.bsModalWindow.hide()},TemplateFormClient.prototype.postDocument=function(e){var t=this,s=[],r={placeholders:[],enforce_order:this.elEnforceSigOrder.is(":checked")},n=this.elVersionForm.find("> table > tbody > tr");n.each((function(e,t){var n=jQuery(t),o=n.find("select.requisigner-placeholder-order").val(),i=n.find("input.requisigner-ph-friendly-name").val();-1==s.indexOf(o)&&(r.placeholders.push({id:n.data("placeholderId"),friendly_name:i,order:o}),s.push(o))})),r.placeholders.length==n.length?(this.oHoldonOpts.message="Updating template version...",HoldOn.open(this.oHoldonOpts),jQuery.ajax({type:"POST",url:this.elVersionForm.attr("action"),data:JSON.stringify(r),contentType:"application/json",processData:!1,headers:{"X-CSRF-TOKEN":this.sCSRFToken}}).done((function(e){200==e.code?t.amhAlertHandler.showAlert("success",e.result):Array.isArray(e.result)?t.amhAlertHandler.showAlert("danger",e.result.join("<br>")):t.amhAlertHandler.showAlert("danger",e.result)})).always((function(){HoldOn.close()}))):this.amhAlertHandler.showAlert("danger","Please make sure a unique order is assigned to each placeholder!")},jQuery(document).ready((function(){new TemplateFormClient}))})()})();